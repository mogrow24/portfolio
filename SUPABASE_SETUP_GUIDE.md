# Supabase 방문자 추적 테이블 설정 가이드

## 현재 상황

방문자 추적 시스템이 구현되었지만, **Supabase 데이터베이스에 `visitors` 테이블을 생성**해야 합니다.

## 설정 방법 (2가지)

### 방법 1: Supabase를 사용하는 경우 (권장)

1. **Supabase 대시보드 접속**
   - https://supabase.com 접속
   - 프로젝트 선택

2. **SQL Editor 열기**
   - 왼쪽 메뉴에서 "SQL Editor" 클릭
   - "New query" 버튼 클릭

3. **SQL 스크립트 실행**
   - `supabase-visitors-table.sql` 파일 내용을 복사
   - SQL Editor에 붙여넣기
   - "Run" 버튼 클릭

4. **확인**
   - "Table Editor"에서 `visitors` 테이블이 생성되었는지 확인

**이렇게 하면:**
- ✅ 모든 브라우저/기기에서 수집된 방문자 데이터가 중앙에서 관리됨
- ✅ 어드민 페이지에서 모든 방문자 통계를 확인할 수 있음
- ✅ 데이터가 영구 저장됨

### 방법 2: Supabase를 사용하지 않는 경우

**현재 상태:**
- ✅ 방문자 추적은 작동합니다
- ⚠️ 하지만 **로컬 스토리지만 사용**됩니다
- ⚠️ 각 브라우저별로 데이터가 독립적으로 저장됩니다
- ⚠️ 어드민 페이지에서는 **현재 브라우저의 방문 데이터만** 보입니다

**이 경우:**
- Supabase 설정 없이도 작동하지만, 전체 방문자 통계는 볼 수 없습니다
- 각 사용자의 브라우저에만 방문 기록이 남습니다

## 설정 확인

설정 후 어드민 페이지의 "방문자" 탭에서:
- Supabase 연동 표시가 나타나면 ✅ 성공
- "로컬 스토리지" 경고가 나타나면 ⚠️ Supabase 미설정 상태

## 문제 해결

**Q: SQL 스크립트 실행 시 에러가 발생합니다**
- A: Supabase 프로젝트가 올바르게 설정되어 있는지 확인하세요
- A: `visitors` 테이블이 이미 존재하는 경우, 에러가 발생할 수 있지만 무시해도 됩니다

**Q: 어드민 페이지에 방문자 데이터가 안 보입니다**
- A: Supabase 환경 변수가 `.env.local`에 설정되어 있는지 확인하세요
- A: `NEXT_PUBLIC_SUPABASE_URL`과 `SUPABASE_SERVICE_ROLE_KEY`가 필요합니다

## 현재 상태 확인

현재 프로젝트는:
- ✅ Supabase가 설정되어 있으면 → 모든 방문자 데이터 수집
- ✅ Supabase가 없으면 → 로컬 스토리지로 작동 (제한적)

**추가 설정 없이도 작동하지만, 전체 통계를 보려면 Supabase 테이블 생성이 필요합니다.**


